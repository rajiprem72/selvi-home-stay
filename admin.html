<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Admin Login - Selvi Home Stay</title>
<style>
body { font-family: Arial; max-width: 400px; margin: 60px auto; }
input, button { width: 100%; padding: 10px; margin: 10px 0; }
.notice { padding:10px; margin-top:10px; border-radius:6px; }
.error { background:#fff5f5; border:1px solid #f56565; }
</style>
</head>

<body>
<div id="nav-placeholder"></div>
<h2>Admin Login</h2>

<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>

<div id="message"></div>

<script>
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxJJUirnar3OBGwszagDNWH_Js0FhYfzKMYyRVl06bH4IOseYcZ3vIRr6izAHERWqko/exec";

async function login() {

  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  const payload = {
    action: "admin_login",
    username,
    password
  };

  const response = await fetch(APPS_SCRIPT_URL, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: new URLSearchParams(payload)
  });

  const result = await response.json();

  if (result.success) {
    sessionStorage.setItem("adminLoggedIn", "true");
    location.href = "AdminReports.html";
  } else {
    showMessage("Invalid credentials");
  }
}

function showMessage(msg) {
  const div = document.getElementById("message");
  div.className = "notice error";
  div.innerText = msg;
}
</script>
<script src="script.js"></script>
</body>
</html>
