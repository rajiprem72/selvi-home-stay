<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Booking â€” Selvi Home Stay</title>
<link rel="icon" type="image/png" href="images/favicon.png">
<link rel="stylesheet" href="style.css">
<script src="script.js" defer></script>
</head>

<body>
<header>
  <h1>Selvi Home Stay</h1>
  <div class="menu-toggle"><span></span><span></span><span></span></div>
  <nav>
    <a href="index.html">Home</a>
    <a href="gallery.html">Photos</a>
    <a href="videos.html">Videos</a>
    <a href="contact.html">Contact</a>
    <a href="booking.html">Booking</a>
    <a href="admin.html">Admin</a>
  </nav>
</header>

<div class="banner">
  <img src="images/banner.jpg" alt="Selvi Home Stay Rameshwaram">
</div>

<div class="container">
<h2>Booking Form</h2>

<form id="bookingForm">

  <label>Name 
    <input type="text" name="Name" placeholder="e.g. Suresh Kumar" required>
  </label>

  <label>Aadhaar Number 
    <input type="text" name="Aadhaar" placeholder="e.g. 123412341234" required>
  </label>

  <label>Mobile Number 
    <input type="text" name="Mobile" placeholder="e.g. +919123412345" required>
  </label>

  <label>Address 
    <textarea name="Address" rows="2" placeholder="e.g. 12/3 Beach Road, Rameshwaram" required></textarea>
  </label>

  <div class="form-row">
    <label>From Date 
      <input type="date" name="FromDate" required>
    </label>
    <label>To Date 
      <input type="date" name="ToDate" required>
    </label>
  </div>

  <p style="text-align:center; margin:12px 0;">
    <a href="#" onclick="openPaymentPopup(); return false;"
       style="color:#b45309; font-weight:600; text-decoration:underline;">
       ðŸ’° Click here to Pay for Selvi Home Stay
    </a>
  </p>

  <div class="form-row">
    <label>Payment Date 
      <input type="date" name="PaymentDate" required>
    </label>
    <label>Payment Reference Number 
      <input type="text" name="PaymentRefNo" placeholder="e.g. 1234567890123456" required>
    </label>
  </div>

  <label>Payment Amount (â‚¹) 
    <input type="number" name="PaymentAmount" placeholder="e.g. 1000" required>
  </label>

  <button type="submit">Submit Booking</button>
</form>

<div id="result"></div>
</div>

<footer>
  Â© 2025 Selvi Home Stay <br>
  Designed by <br> Premanandhan Narayanan <br>
  WhatsApp +91 98844 86609
</footer>

<script>
/* === Open payment page in centered popup === */
function openPaymentPopup() {
  const w = 480, h = 650;
  const left = (screen.width / 2) - (w / 2);
  const top = (screen.height / 2) - (h / 2);
  window.open("payments.html", "SelviHomeStayPayment",
              `width=${w},height=${h},top=${top},left=${left},resizable=yes,scrollbars=yes`);
}

/* === Booking form submission === */
const GS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbw2vQtjD6maNQJtbrvTBaJjvbmgrkPfYj5RZE1BHzXPwhGKbFq8HL7R4xKsBNFeqLhp8w/exec";
document.getElementById('bookingForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target).entries());
  data.action = 'create_booking';
  data.Source = 'Website';
  const resDiv = document.getElementById('result');
  resDiv.textContent = 'Submitting...';
  try {
    const res = await fetch(GS_WEBAPP_URL, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    });
    const json = await res.json();
    resDiv.innerHTML = json.error
      ? `<div style='color:red'>Error: ${json.error || 'Unknown'}</div>`
      : `<div style='color:green'>âœ… Booking received! ID: <b>${json.bookingId || ''}</b></div>`;
    if (!json.error) e.target.reset();
  } catch(err) {
    resDiv.innerHTML = `<div style='color:red'>Error: ${err.message}</div>`;
  }
});
</script>

</body>
</html>
